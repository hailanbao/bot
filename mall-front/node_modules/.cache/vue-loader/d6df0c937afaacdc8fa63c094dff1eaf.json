{"remainingRequest":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\developer\\mall_sys\\mall-front\\src\\pages\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\developer\\mall_sys\\mall-front\\src\\pages\\login.vue","mtime":1698477415907},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHtzZXRDb29raWV9IGZyb20gJ0AvdXRpbC9zdXBwb3J0JzsKCmltcG9ydCBRcyBmcm9tICdxcycKCmV4cG9ydCBkZWZhdWx0IHsKICBRcywKICBuYW1lOiAnbG9naW4nLAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOicnLAogICAgICBwYXNzd29yZDonJywKICAgICAgdXNlcklkOicnCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIGxvZ2luKCl7CiAgICAgIGxldCB7IHVzZXJuYW1lLHBhc3N3b3JkIH0gPSB0aGlzOwogICAgICAKICAgICAgdGhpcy5heGlvcy5wb3N0KAogICAgICAgICd1c2VyL2xvZ2luJywKICAgICAgICAgUXMuc3RyaW5naWZ5KHsKICAgICAgICAgdXNlcm5hbWU6dXNlcm5hbWUsCiAgICAgICAgIHBhc3N3b3JkOnBhc3N3b3JkCiAgICAgICAgIH0pLHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pLnRoZW4oKHJlcyk9PnsKICAgICAgIAogICAgICAgICAgIC8vIOWwhiB0b2tlbkhlYWQrand0VG9rZW4g5a2Y5YWl5YiwY29va2llICDkuIvmrKHor7fmsYLlsLHlj6/ku6XmkLrluKblnKjor7fmsYLlpLTkuK3kuoYKICAgICAgICAgIHRoaXMuJGNvb2tpZS5zZXQoJ3Rva2VuJyxyZXMudG9rZW5IZWFkKycgJytyZXMudG9rZW4se2V4cGlyZXM6JzFNJ30pOwogICAgICAgICAgLy8g5L+d5a2Y5Yiw5YWo5bGA5Y+Y6YeP5LitCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2F2ZVRva2VuJyxyZXMudG9rZW4pOwogICAgICAgICAgLy8g5ou/5YiwcGF5bG9hZGVyIOino+eggQogICAgICAgICAgdmFyIHRva2VuU3RyPSBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHdpbmRvdy5hdG9iKHJlcy50b2tlbi5zcGxpdCgnLicpWzFdKSkpOwogICAgICAgICAgLy8g6L2s5o2i5Li6anNvbuWvueixoQogICAgICAgICAgbGV0IHVzZXJuYW1lID0gSlNPTi5wYXJzZSh0b2tlblN0cikudXNlcl9uYW1lOwoKICAgICAgICAgIC8vIGxldCB1c2VybmFtZT1yZXMudXNlcm5hbWUKICAgICAgICAgIAogICAgICAgICAgLy8gc2V0Q29va2llKCJ0b2tlbiIsdXNlcm5hbWUsMTIwKTsKCiAgICAgICAgICAvLyBzZXRDb29raWU9dGhpcy4kY29va2llLnNldAogICAgICAgICAgIHNldENvb2tpZSgidXNlcm5hbWUiLHVzZXJuYW1lLDEyMCk7CiAgICAgICAgICAgLy8gdGhpcy5zYXZlVXNlck5hbWU9IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzYXZlVXNlck5hbWUnLHVzZXJuYW1lKQogICAgICAgICAgIHRoaXMuc2F2ZVVzZXJOYW1lKHVzZXJuYW1lKTsKICAgICAgICAgICAgCiAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgIG5hbWU6J2luZGV4JywKICAgICAgICAgICAgICBwYXJhbXM6ewogICAgICAgICAgICAgICAgZnJvbTonbG9naW4nCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgfSkKICAgIH0sCiAgICAuLi5tYXBBY3Rpb25zKFsnc2F2ZVVzZXJOYW1lJ10pLAogICAgcmVnaXN0ZXIoKXsKICAgICAgdGhpcy5heGlvcy5wb3N0KCcvdXNlci9yZWdpc3RlcicsewogICAgICAgIHVzZXJuYW1lOnRoaXMudXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6dGhpcy5wYXNzd29yZAogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfms6jlhozmiJDlip8nKTsKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";AAuCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"container\">\n      <a href=\"/#/index\"><img src=\"/imgs/login-logo.png\" alt=\"\"></a>\n    </div>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"login-form\">\n          <h3>\n            <span class=\"checked\">帐号登录</span>\n              <!-- <span class=\"sep-line\">|</span><span>扫码登录</span> -->\n          </h3>\n          <div class=\"input\">\n            <input type=\"text\" placeholder=\"请输入帐号\" v-model=\"username\">\n          </div>\n          <div class=\"input\">\n            <input type=\"password\" placeholder=\"请输入密码\" v-model=\"password\">\n          </div>\n          <div class=\"btn-box\">\n            <a href=\"javascript:;\" class=\"btn\" @click=\"login\">登录</a>\n          </div>\n          <div class=\"tips\">\n            <!-- <div class=\"sms\" @click=\"register\">手机短信登录/注册</div> -->\n            <div class=\"reg\" @click=\"register\">立即注册<span>|</span>忘记密码？</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"footer\">\n      <div class=\"footer-link\">\n        <a href=\"\" target=\"_blank\">重庆科技学院</a><span>|</span>\n        <a href=\"\" target=\"_blank\">数据结构与算法</a><span>|</span>\n        <a href=\"\" target=\"_blank\">智能工程与技术学院</a>\n      </div>\n      <p class=\"copyright\">Copyright ©2023 重庆科技学院 All Rights Reserved.</p>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapActions } from 'vuex';\nimport {setCookie} from '@/util/support';\n\nimport Qs from 'qs'\n\nexport default {\n  Qs,\n  name: 'login',\n  data(){\n    return {\n      username:'',\n      password:'',\n      userId:''\n    }\n  },\n  methods:{\n    login(){\n      let { username,password } = this;\n      \n      this.axios.post(\n        'user/login',\n         Qs.stringify({\n         username:username,\n         password:password\n         }),{headers: {'Content-Type': 'application/x-www-form-urlencoded'}}).then((res)=>{\n       \n           // 将 tokenHead+jwtToken 存入到cookie  下次请求就可以携带在请求头中了\n          this.$cookie.set('token',res.tokenHead+' '+res.token,{expires:'1M'});\n          // 保存到全局变量中\n          this.$store.dispatch('saveToken',res.token);\n          // 拿到payloader 解码\n          var tokenStr= decodeURIComponent(escape(window.atob(res.token.split('.')[1])));\n          // 转换为json对象\n          let username = JSON.parse(tokenStr).user_name;\n\n          // let username=res.username\n          \n          // setCookie(\"token\",username,120);\n\n          // setCookie=this.$cookie.set\n           setCookie(\"username\",username,120);\n           // this.saveUserName= this.$store.dispatch('saveUserName',username)\n           this.saveUserName(username);\n            \n           this.$router.push({\n              name:'index',\n              params:{\n                from:'login'\n              }\n            });\n      })\n    },\n    ...mapActions(['saveUserName']),\n    register(){\n      this.axios.post('/user/register',{\n        username:this.username,\n        password:this.password\n      }).then(()=>{\n        this.$message.success('注册成功');\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.login{\n  &>.container{\n    height:113px;\n    img{\n      width:auto;\n      height:100%;\n    }\n  }\n  .wrapper{\n    background:url('/imgs/login-bg.jpg') no-repeat center;\n    .container{\n      height:576px;\n      .login-form{\n        box-sizing: border-box;\n        padding-left: 31px;\n        padding-right: 31px;\n        width:410px;\n        height:510px;\n        background-color:#ffffff;\n        position:absolute;\n        bottom:29px;\n        right:0;\n        h3{\n          line-height:23px;\n          font-size:24px;\n          text-align:center;\n          margin:40px auto 49px;\n          .checked{\n            color:#FF6600;\n          }\n          .sep-line{\n            margin:0 32px;\n          }\n        }\n        .input{\n          display:inline-block;\n          width:348px;\n          height:50px;\n          border:1px solid #E5E5E5;\n          margin-bottom:20px;\n          input{\n            width: 100%;\n            height: 100%;\n            border: none;\n            padding: 18px;\n          }\n        }\n        .btn{\n          width:100%;\n          line-height:50px;\n          margin-top:10px;\n          font-size:16px;\n        }\n        .tips{\n          margin-top:14px;\n          display:flex;\n          justify-content:space-between;\n          font-size:14px;\n          cursor:pointer;\n          .sms{\n            color:#FF6600;\n          }\n          .reg{\n            color:#999999;\n            span{\n              margin:0 7px;\n            }\n          }\n        }\n      }\n    }\n  }\n  .footer{\n    height:100px;\n    padding-top:60px;\n    color:#999999;\n    font-size:16px;\n    text-align:center;\n    .footer-link{\n      a{\n        color:#999999;\n        display:inline-block;\n      }\n      span{\n        margin:0 10px;\n      }\n    }\n    .copyright{\n      margin-top:13px;\n    }\n  }\n}\n</style>"]}]}