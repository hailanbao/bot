{"remainingRequest":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\developer\\mall_sys\\mall-front\\src\\pages\\orderList.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\developer\\mall_sys\\mall-front\\src\\pages\\orderList.vue","mtime":1617286768000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgaW1wb3J0IE9yZGVySGVhZGVyIGZyb20gJy4vLi4vY29tcG9uZW50cy9PcmRlckhlYWRlcicKICBpbXBvcnQgTG9hZGluZyBmcm9tICcuLy4uL2NvbXBvbmVudHMvTG9hZGluZycKICBpbXBvcnQgTm9EYXRhIGZyb20gJy4vLi4vY29tcG9uZW50cy9Ob0RhdGEnCiAgaW1wb3J0IHsgUGFnaW5hdGlvbixCdXR0b24gfSBmcm9tICdlbGVtZW50LXVpJwogIGltcG9ydCBpbmZpbml0ZVNjcm9sbCBmcm9tICd2dWUtaW5maW5pdGUtc2Nyb2xsJwogIGltcG9ydCBRcyBmcm9tICdxcycKICBleHBvcnQgZGVmYXVsdHsKICAgIG5hbWU6J29yZGVyLWxpc3QnLAogICAgY29tcG9uZW50czp7CiAgICAgIE9yZGVySGVhZGVyLAogICAgICBMb2FkaW5nLAogICAgICBOb0RhdGEsCiAgICAgIFtQYWdpbmF0aW9uLm5hbWVdOlBhZ2luYXRpb24sCiAgICAgIFtCdXR0b24ubmFtZV06QnV0dG9uCiAgICB9LAogICAgZGlyZWN0aXZlczogewogICAgICBpbmZpbml0ZVNjcm9sbAogICAgfSwKICAgIGRhdGEoKXsKICAgICAgcmV0dXJuIHsKICAgICAgICBsb2FkaW5nOmZhbHNlLAogICAgICAgIGxpc3Q6W10sCiAgICAgICAgcGFnZVNpemU6MTAsCiAgICAgICAgcGFnZU51bToxLAogICAgICAgIHRvdGFsOjAsCiAgICAgICAgc2hvd05leHRQYWdlOnRydWUsLy/liqDovb3mm7TlpJrvvJrmmK/lkKbmmL7npLrmjInpkq4KICAgICAgICBidXN5OmZhbHNlLC8v5rua5Yqo5Yqg6L2977yM5piv5ZCm6Kem5Y+RCiAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgIGdldE9yZGVyTGlzdCgpewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5idXN5ID0gdHJ1ZTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoJy9vcmRlci9saXN0L3VzZXJPcmRlcicsUXMuc3RyaW5naWZ5KHsgCiAgICAgICAgICAgIHBhZ2VTaXplOjEwLAogICAgICAgICAgICBwYWdlTnVtOnRoaXMucGFnZU51bQogICAgICAgICAgIAogICAgICAgIH0pLHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pLnRoZW4oKHJlcyk9PnsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5saXN0ID0gcmVzLnJlY29yZHM7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsOwogICAgICAgICAgdGhpcy5zaG93TmV4dFBhZ2UgPSByZXMuaGFzTmV4dFBhZ2U7CiAgICAgICAgICB0aGlzLmJ1c3kgPSBmYWxzZTsKICAgICAgICB9KS5jYXRjaCgoKT0+ewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgfSwKICAgICAgZ29QYXkob3JkZXJJZCl7CiAgICAgICAgLy8g5LiJ56eN6Lev55Sx6Lez6L2s5pa55byPCiAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goJy9vcmRlci9wYXknKQogICAgICAgIC8qdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTonb3JkZXItcGF5JywKICAgICAgICAgIHF1ZXJ5OnsKICAgICAgICAgICAgb3JkZXJObwogICAgICAgICAgfQogICAgICAgIH0pKi8KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOicvb3JkZXIvcGF5JywKICAgICAgICAgIHF1ZXJ5OnsKICAgICAgICAgICAgb3JkZXJJZAogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIC8vIOesrOS4gOenjeaWueazle+8muWIhumhteWZqAogICAgICBoYW5kbGVDaGFuZ2UocGFnZU51bSl7CiAgICAgICAgdGhpcy5wYWdlTnVtID0gcGFnZU51bTsKICAgICAgICB0aGlzLmdldE9yZGVyTGlzdCgpOwogICAgICB9LAogICAgICAvLyDnrKzkuoznp43mlrnms5XvvJrliqDovb3mm7TlpJrmjInpkq4KICAgICAgbG9hZE1vcmUoKXsKICAgICAgICB0aGlzLnBhZ2VOdW0rKzsKICAgICAgICB0aGlzLmdldE9yZGVyTGlzdCgpOwogICAgICB9LAogICAgICAvLyDnrKzkuInnp43mlrnms5XvvJrmu5rliqjliqDovb3vvIzpgJrov4ducG3mj5Lku7blrp7njrAKICAgICAgc2Nyb2xsTW9yZSgpewogICAgICAgIHRoaXMuYnVzeSA9IHRydWU7CiAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgdGhpcy5wYWdlTnVtKys7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9LDUwMCk7CiAgICAgIH0sCiAgICAgIC8vIOS4k+mXqOe7mXNjcm9sbE1vcmXkvb/nlKgKICAgICAgZ2V0TGlzdCgpewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgdGhpcy5heGlvcy5nZXQoJy9vcmRlcnMnLHsKICAgICAgICAgIHBhcmFtczp7CiAgICAgICAgICAgIHBhZ2VTaXplOjEwLAogICAgICAgICAgICBwYWdlTnVtOnRoaXMucGFnZU51bQogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oKHJlcyk9PnsKICAgICAgICAgIHRoaXMubGlzdCA9IHRoaXMubGlzdC5jb25jYXQocmVzLmxpc3QpOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZihyZXMuaGFzTmV4dFBhZ2UpewogICAgICAgICAgICB0aGlzLmJ1c3k9ZmFsc2U7CiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhpcy5idXN5PXRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICB9CiAgfQo="},{"version":3,"sources":["orderList.vue"],"names":[],"mappings":";AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderList.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"order-list\">\n    <order-header title=\"订单列表\">\n      <template v-slot:tip>\n        <span>请谨防钓鱼链接或诈骗电话，了解更多></span>\n      </template>\n    </order-header>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"order-box\">\n          <loading v-if=\"loading\"></loading>\n          <div class=\"order\" v-for=\"(order,index) in list\" :key=\"index\">\n            <div class=\"order-title\">\n              <div class=\"item-info fl\">\n                {{order.createTime}}\n                <span></span>\n                {{order.receiverName}}\n                <span></span>\n                订单号：{{order.orderSn}}\n                <span>| 总额:</span>\n                {{order.totalAmount}}\n                <span>| 订单状态:</span>\n                <span v-if=\"order.status === 0\">\n                  待付款\n                </span>\n                 <span v-else-if=\"order.status === 1\">\n                  代发货\n                </span>\n                <span v-else-if=\"order.status === 2\">\n                  已发货\n                </span>\n                <span v-else-if=\"order.status === 3\">\n                  已完成\n                </span> \n                <span v-else-if=\"order.status === 4\">\n                  已关闭\n                </span>\n                <span v-else>\n                  未知状态\n                </span>\n\n              </div>\n              <div class=\"item-money fr\">\n                <span>应付金额：</span>\n                <span class=\"money\">{{order.payAmount}}</span>\n                <span>元</span>\n              </div>\n              \n            </div>\n            <div class=\"order-content clearfix\">\n              <div class=\"good-box fl\">\n                <div class=\"good-list\" v-for=\"(item,i) in order.orderItemList\" :key=\"i\">\n                  <div class=\"good-img\">\n                    <img v-lazy=\"item.productPic\" alt=\"\">\n                  </div>\n                  <div class=\"good-name\">\n                    <div class=\"p-name\">{{item.productName}}</div>\n                    <div class=\"p-money\">{{item.productPrice + 'X' + item.productQuantity}}元</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"good-state fr\" v-if=\"order.status == 0\"> \n                <a href=\"javascript:;\" @click=\"goPay(order.id)\">去支付</a>\n              </div>\n            </div>\n          </div>\n          <el-pagination\n            v-if=\"true\"\n            class=\"pagination\"\n            background\n            layout=\"prev, pager, next\"\n            :pageSize=\"pageSize\"\n            :total=\"total\"\n            @current-change=\"handleChange\"\n            >\n          </el-pagination>\n          <div class=\"load-more\" v-if=\"false\">\n              <el-button type=\"primary\" :loading=\"loading\" @click=\"loadMore\">加载更多</el-button>\n          </div>\n          <div class=\"scroll-more\"\n            v-infinite-scroll=\"scrollMore\"\n            infinite-scroll-disabled=\"true\"\n            infinite-scroll-distance=\"410\"\n            v-if=\"false\"\n          >\n            <img src=\"/imgs/loading-svg/loading-spinning-bubbles.svg\" alt=\"\" v-show=\"loading\">\n          </div>\n          <no-data v-if=\"!loading && list.length==0\"></no-data>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import OrderHeader from './../components/OrderHeader'\n  import Loading from './../components/Loading'\n  import NoData from './../components/NoData'\n  import { Pagination,Button } from 'element-ui'\n  import infiniteScroll from 'vue-infinite-scroll'\n  import Qs from 'qs'\n  export default{\n    name:'order-list',\n    components:{\n      OrderHeader,\n      Loading,\n      NoData,\n      [Pagination.name]:Pagination,\n      [Button.name]:Button\n    },\n    directives: {\n      infiniteScroll\n    },\n    data(){\n      return {\n        loading:false,\n        list:[],\n        pageSize:10,\n        pageNum:1,\n        total:0,\n        showNextPage:true,//加载更多：是否显示按钮\n        busy:false,//滚动加载，是否触发\n      }\n    },\n    mounted(){\n      this.getOrderList();\n    },\n    methods:{\n      getOrderList(){\n        this.loading = true;\n        this.busy = true;\n        this.axios.post('/order/list/userOrder',Qs.stringify({ \n            pageSize:10,\n            pageNum:this.pageNum\n           \n        }),{headers: {'Content-Type': 'application/x-www-form-urlencoded'}}).then((res)=>{\n          this.loading = false;\n          this.list = res.records;\n          this.total = res.total;\n          this.showNextPage = res.hasNextPage;\n          this.busy = false;\n        }).catch(()=>{\n          this.loading = false;\n        })\n      },\n      goPay(orderId){\n        // 三种路由跳转方式\n        // this.$router.push('/order/pay')\n        /*this.$router.push({\n          name:'order-pay',\n          query:{\n            orderNo\n          }\n        })*/\n        this.$router.push({\n          path:'/order/pay',\n          query:{\n            orderId\n          }\n        })\n      },\n      // 第一种方法：分页器\n      handleChange(pageNum){\n        this.pageNum = pageNum;\n        this.getOrderList();\n      },\n      // 第二种方法：加载更多按钮\n      loadMore(){\n        this.pageNum++;\n        this.getOrderList();\n      },\n      // 第三种方法：滚动加载，通过npm插件实现\n      scrollMore(){\n        this.busy = true;\n        setTimeout(()=>{\n          this.pageNum++;\n          this.getList();\n        },500);\n      },\n      // 专门给scrollMore使用\n      getList(){\n        this.loading = true;\n        this.axios.get('/orders',{\n          params:{\n            pageSize:10,\n            pageNum:this.pageNum\n          }\n        }).then((res)=>{\n          this.list = this.list.concat(res.list);\n          this.loading = false;\n          if(res.hasNextPage){\n            this.busy=false;\n          }else{\n            this.busy=true;\n          }\n        });\n      },\n    }\n  }\n</script>\n<style lang=\"scss\">\n  @import './../assets/scss/config.scss';\n  @import './../assets/scss/mixin.scss';\n  .order-list{\n    .wrapper{\n      background-color:$colorJ;\n      padding-top:33px;\n      padding-bottom:110px;\n      .order-box{\n        .order{\n          @include border();\n          background-color:$colorG;\n          margin-bottom:31px;\n          &:last-child{\n            margin-bottom:0;\n          }\n          .order-title{\n            @include height(74px);\n            background-color:$colorK;\n            padding:0 43px;\n            font-size:16px;\n            color:$colorC;\n            .item-info{\n              span{\n                margin:0 9px;\n              }\n            }\n            .money{\n              font-size:26px;\n              color:$colorB;\n            }\n          }\n          .order-content{\n            padding:0 43px;\n            .good-box{\n              width:88%;\n              .good-list{\n                display: flex;\n                align-items: center;\n                height:145px;\n                .good-img{\n                  width:112px;\n                  img{\n                    width:100%;\n                  }\n                }\n                .good-name{\n                  font-size:20px;\n                  color:$colorB;\n                }\n              }\n            }\n            .good-state{\n              @include height(145px);\n              font-size: 20px;\n              color:$colorA;\n              a{\n                color:$colorA;\n              }\n            }\n          }\n        }\n        .pagination{\n          text-align:right;\n        }\n        .el-pagination.is-background .el-pager li:not(.disabled).active{\n          background-color: #FF6600;\n        }\n        .el-button--primary{\n          background-color: #FF6600;\n          border-color: #FF6600;\n        }\n        .load-more,.scroll-more{\n          text-align:center;\n        }\n      }\n    }\n  }\n</style>"]}]}