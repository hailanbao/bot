{"remainingRequest":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js!F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\developer\\mall_sys\\mall-front\\src\\pages\\orderList.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\developer\\mall_sys\\mall-front\\src\\pages\\orderList.vue","mtime":1617286768000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE9yZGVySGVhZGVyIGZyb20gJy4vLi4vY29tcG9uZW50cy9PcmRlckhlYWRlcic7CmltcG9ydCBMb2FkaW5nIGZyb20gJy4vLi4vY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IE5vRGF0YSBmcm9tICcuLy4uL2NvbXBvbmVudHMvTm9EYXRhJzsKaW1wb3J0IHsgUGFnaW5hdGlvbiwgQnV0dG9uIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCBpbmZpbml0ZVNjcm9sbCBmcm9tICd2dWUtaW5maW5pdGUtc2Nyb2xsJzsKaW1wb3J0IFFzIGZyb20gJ3FzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdvcmRlci1saXN0JywKICBjb21wb25lbnRzOiB7CiAgICBPcmRlckhlYWRlciwKICAgIExvYWRpbmcsCiAgICBOb0RhdGEsCiAgICBbUGFnaW5hdGlvbi5uYW1lXTogUGFnaW5hdGlvbiwKICAgIFtCdXR0b24ubmFtZV06IEJ1dHRvbgogIH0sCiAgZGlyZWN0aXZlczogewogICAgaW5maW5pdGVTY3JvbGwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbGlzdDogW10sCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgcGFnZU51bTogMSwKICAgICAgdG90YWw6IDAsCiAgICAgIHNob3dOZXh0UGFnZTogdHJ1ZSwKICAgICAgLy/liqDovb3mm7TlpJrvvJrmmK/lkKbmmL7npLrmjInpkq4KICAgICAgYnVzeTogZmFsc2UgLy/mu5rliqjliqDovb3vvIzmmK/lkKbop6blj5EKICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRPcmRlckxpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuYnVzeSA9IHRydWU7CiAgICAgIHRoaXMuYXhpb3MucG9zdCgnL29yZGVyL2xpc3QvdXNlck9yZGVyJywgUXMuc3RyaW5naWZ5KHsKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgcGFnZU51bTogdGhpcy5wYWdlTnVtCiAgICAgIH0pLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5saXN0ID0gcmVzLnJlY29yZHM7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgICB0aGlzLnNob3dOZXh0UGFnZSA9IHJlcy5oYXNOZXh0UGFnZTsKICAgICAgICB0aGlzLmJ1c3kgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBnb1BheShvcmRlcklkKSB7CiAgICAgIC8vIOS4ieenjei3r+eUsei3s+i9rOaWueW8jwogICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCgnL29yZGVyL3BheScpCiAgICAgIC8qdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6J29yZGVyLXBheScsCiAgICAgICAgcXVlcnk6ewogICAgICAgICAgb3JkZXJObwogICAgICAgIH0KICAgICAgfSkqLwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9vcmRlci9wYXknLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBvcmRlcklkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDnrKzkuIDnp43mlrnms5XvvJrliIbpobXlmagKICAgIGhhbmRsZUNoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgICB9LAogICAgLy8g56ys5LqM56eN5pa55rOV77ya5Yqg6L295pu05aSa5oyJ6ZKuCiAgICBsb2FkTW9yZSgpIHsKICAgICAgdGhpcy5wYWdlTnVtKys7CiAgICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgICB9LAogICAgLy8g56ys5LiJ56eN5pa55rOV77ya5rua5Yqo5Yqg6L2977yM6YCa6L+HbnBt5o+S5Lu25a6e546wCiAgICBzY3JvbGxNb3JlKCkgewogICAgICB0aGlzLmJ1c3kgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLnBhZ2VOdW0rKzsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgfSwgNTAwKTsKICAgIH0sCiAgICAvLyDkuJPpl6jnu5lzY3JvbGxNb3Jl5L2/55SoCiAgICBnZXRMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmF4aW9zLmdldCgnL29yZGVycycsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHRoaXMubGlzdC5jb25jYXQocmVzLmxpc3QpOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuaGFzTmV4dFBhZ2UpIHsKICAgICAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmJ1c3kgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["OrderHeader","Loading","NoData","Pagination","Button","infiniteScroll","Qs","name","components","directives","data","loading","list","pageSize","pageNum","total","showNextPage","busy","mounted","getOrderList","methods","axios","post","stringify","headers","then","res","records","hasNextPage","catch","goPay","orderId","$router","push","path","query","handleChange","loadMore","scrollMore","setTimeout","getList","get","params","concat"],"sources":["src/pages/orderList.vue"],"sourcesContent":["<template>\n  <div class=\"order-list\">\n    <order-header title=\"订单列表\">\n      <template v-slot:tip>\n        <span>请谨防钓鱼链接或诈骗电话，了解更多></span>\n      </template>\n    </order-header>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"order-box\">\n          <loading v-if=\"loading\"></loading>\n          <div class=\"order\" v-for=\"(order,index) in list\" :key=\"index\">\n            <div class=\"order-title\">\n              <div class=\"item-info fl\">\n                {{order.createTime}}\n                <span></span>\n                {{order.receiverName}}\n                <span></span>\n                订单号：{{order.orderSn}}\n                <span>| 总额:</span>\n                {{order.totalAmount}}\n                <span>| 订单状态:</span>\n                <span v-if=\"order.status === 0\">\n                  待付款\n                </span>\n                 <span v-else-if=\"order.status === 1\">\n                  代发货\n                </span>\n                <span v-else-if=\"order.status === 2\">\n                  已发货\n                </span>\n                <span v-else-if=\"order.status === 3\">\n                  已完成\n                </span> \n                <span v-else-if=\"order.status === 4\">\n                  已关闭\n                </span>\n                <span v-else>\n                  未知状态\n                </span>\n\n              </div>\n              <div class=\"item-money fr\">\n                <span>应付金额：</span>\n                <span class=\"money\">{{order.payAmount}}</span>\n                <span>元</span>\n              </div>\n              \n            </div>\n            <div class=\"order-content clearfix\">\n              <div class=\"good-box fl\">\n                <div class=\"good-list\" v-for=\"(item,i) in order.orderItemList\" :key=\"i\">\n                  <div class=\"good-img\">\n                    <img v-lazy=\"item.productPic\" alt=\"\">\n                  </div>\n                  <div class=\"good-name\">\n                    <div class=\"p-name\">{{item.productName}}</div>\n                    <div class=\"p-money\">{{item.productPrice + 'X' + item.productQuantity}}元</div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"good-state fr\" v-if=\"order.status == 0\"> \n                <a href=\"javascript:;\" @click=\"goPay(order.id)\">去支付</a>\n              </div>\n            </div>\n          </div>\n          <el-pagination\n            v-if=\"true\"\n            class=\"pagination\"\n            background\n            layout=\"prev, pager, next\"\n            :pageSize=\"pageSize\"\n            :total=\"total\"\n            @current-change=\"handleChange\"\n            >\n          </el-pagination>\n          <div class=\"load-more\" v-if=\"false\">\n              <el-button type=\"primary\" :loading=\"loading\" @click=\"loadMore\">加载更多</el-button>\n          </div>\n          <div class=\"scroll-more\"\n            v-infinite-scroll=\"scrollMore\"\n            infinite-scroll-disabled=\"true\"\n            infinite-scroll-distance=\"410\"\n            v-if=\"false\"\n          >\n            <img src=\"/imgs/loading-svg/loading-spinning-bubbles.svg\" alt=\"\" v-show=\"loading\">\n          </div>\n          <no-data v-if=\"!loading && list.length==0\"></no-data>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import OrderHeader from './../components/OrderHeader'\n  import Loading from './../components/Loading'\n  import NoData from './../components/NoData'\n  import { Pagination,Button } from 'element-ui'\n  import infiniteScroll from 'vue-infinite-scroll'\n  import Qs from 'qs'\n  export default{\n    name:'order-list',\n    components:{\n      OrderHeader,\n      Loading,\n      NoData,\n      [Pagination.name]:Pagination,\n      [Button.name]:Button\n    },\n    directives: {\n      infiniteScroll\n    },\n    data(){\n      return {\n        loading:false,\n        list:[],\n        pageSize:10,\n        pageNum:1,\n        total:0,\n        showNextPage:true,//加载更多：是否显示按钮\n        busy:false,//滚动加载，是否触发\n      }\n    },\n    mounted(){\n      this.getOrderList();\n    },\n    methods:{\n      getOrderList(){\n        this.loading = true;\n        this.busy = true;\n        this.axios.post('/order/list/userOrder',Qs.stringify({ \n            pageSize:10,\n            pageNum:this.pageNum\n           \n        }),{headers: {'Content-Type': 'application/x-www-form-urlencoded'}}).then((res)=>{\n          this.loading = false;\n          this.list = res.records;\n          this.total = res.total;\n          this.showNextPage = res.hasNextPage;\n          this.busy = false;\n        }).catch(()=>{\n          this.loading = false;\n        })\n      },\n      goPay(orderId){\n        // 三种路由跳转方式\n        // this.$router.push('/order/pay')\n        /*this.$router.push({\n          name:'order-pay',\n          query:{\n            orderNo\n          }\n        })*/\n        this.$router.push({\n          path:'/order/pay',\n          query:{\n            orderId\n          }\n        })\n      },\n      // 第一种方法：分页器\n      handleChange(pageNum){\n        this.pageNum = pageNum;\n        this.getOrderList();\n      },\n      // 第二种方法：加载更多按钮\n      loadMore(){\n        this.pageNum++;\n        this.getOrderList();\n      },\n      // 第三种方法：滚动加载，通过npm插件实现\n      scrollMore(){\n        this.busy = true;\n        setTimeout(()=>{\n          this.pageNum++;\n          this.getList();\n        },500);\n      },\n      // 专门给scrollMore使用\n      getList(){\n        this.loading = true;\n        this.axios.get('/orders',{\n          params:{\n            pageSize:10,\n            pageNum:this.pageNum\n          }\n        }).then((res)=>{\n          this.list = this.list.concat(res.list);\n          this.loading = false;\n          if(res.hasNextPage){\n            this.busy=false;\n          }else{\n            this.busy=true;\n          }\n        });\n      },\n    }\n  }\n</script>\n<style lang=\"scss\">\n  @import './../assets/scss/config.scss';\n  @import './../assets/scss/mixin.scss';\n  .order-list{\n    .wrapper{\n      background-color:$colorJ;\n      padding-top:33px;\n      padding-bottom:110px;\n      .order-box{\n        .order{\n          @include border();\n          background-color:$colorG;\n          margin-bottom:31px;\n          &:last-child{\n            margin-bottom:0;\n          }\n          .order-title{\n            @include height(74px);\n            background-color:$colorK;\n            padding:0 43px;\n            font-size:16px;\n            color:$colorC;\n            .item-info{\n              span{\n                margin:0 9px;\n              }\n            }\n            .money{\n              font-size:26px;\n              color:$colorB;\n            }\n          }\n          .order-content{\n            padding:0 43px;\n            .good-box{\n              width:88%;\n              .good-list{\n                display: flex;\n                align-items: center;\n                height:145px;\n                .good-img{\n                  width:112px;\n                  img{\n                    width:100%;\n                  }\n                }\n                .good-name{\n                  font-size:20px;\n                  color:$colorB;\n                }\n              }\n            }\n            .good-state{\n              @include height(145px);\n              font-size: 20px;\n              color:$colorA;\n              a{\n                color:$colorA;\n              }\n            }\n          }\n        }\n        .pagination{\n          text-align:right;\n        }\n        .el-pagination.is-background .el-pager li:not(.disabled).active{\n          background-color: #FF6600;\n        }\n        .el-button--primary{\n          background-color: #FF6600;\n          border-color: #FF6600;\n        }\n        .load-more,.scroll-more{\n          text-align:center;\n        }\n      }\n    }\n  }\n</style>"],"mappings":"AA8FA,OAAAA,WAAA;AACA,OAAAC,OAAA;AACA,OAAAC,MAAA;AACA,SAAAC,UAAA,EAAAC,MAAA;AACA,OAAAC,cAAA;AACA,OAAAC,EAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAR,WAAA;IACAC,OAAA;IACAC,MAAA;IACA,CAAAC,UAAA,CAAAI,IAAA,GAAAJ,UAAA;IACA,CAAAC,MAAA,CAAAG,IAAA,GAAAH;EACA;EACAK,UAAA;IACAJ;EACA;EACAK,KAAA;IACA;MACAC,OAAA;MACAC,IAAA;MACAC,QAAA;MACAC,OAAA;MACAC,KAAA;MACAC,YAAA;MAAA;MACAC,IAAA;IACA;EACA;;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAD,aAAA;MACA,KAAAR,OAAA;MACA,KAAAM,IAAA;MACA,KAAAI,KAAA,CAAAC,IAAA,0BAAAhB,EAAA,CAAAiB,SAAA;QACAV,QAAA;QACAC,OAAA,OAAAA;MAEA;QAAAU,OAAA;UAAA;QAAA;MAAA,GAAAC,IAAA,CAAAC,GAAA;QACA,KAAAf,OAAA;QACA,KAAAC,IAAA,GAAAc,GAAA,CAAAC,OAAA;QACA,KAAAZ,KAAA,GAAAW,GAAA,CAAAX,KAAA;QACA,KAAAC,YAAA,GAAAU,GAAA,CAAAE,WAAA;QACA,KAAAX,IAAA;MACA,GAAAY,KAAA;QACA,KAAAlB,OAAA;MACA;IACA;IACAmB,MAAAC,OAAA;MACA;MACA;MACA;AACA;AACA;AACA;AACA;AACA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAC,KAAA;UACAJ;QACA;MACA;IACA;IACA;IACAK,aAAAtB,OAAA;MACA,KAAAA,OAAA,GAAAA,OAAA;MACA,KAAAK,YAAA;IACA;IACA;IACAkB,SAAA;MACA,KAAAvB,OAAA;MACA,KAAAK,YAAA;IACA;IACA;IACAmB,WAAA;MACA,KAAArB,IAAA;MACAsB,UAAA;QACA,KAAAzB,OAAA;QACA,KAAA0B,OAAA;MACA;IACA;IACA;IACAA,QAAA;MACA,KAAA7B,OAAA;MACA,KAAAU,KAAA,CAAAoB,GAAA;QACAC,MAAA;UACA7B,QAAA;UACAC,OAAA,OAAAA;QACA;MACA,GAAAW,IAAA,CAAAC,GAAA;QACA,KAAAd,IAAA,QAAAA,IAAA,CAAA+B,MAAA,CAAAjB,GAAA,CAAAd,IAAA;QACA,KAAAD,OAAA;QACA,IAAAe,GAAA,CAAAE,WAAA;UACA,KAAAX,IAAA;QACA;UACA,KAAAA,IAAA;QACA;MACA;IACA;EACA;AACA"}]}