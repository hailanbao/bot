{"remainingRequest":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js!F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\developer\\mall_sys\\mall-front\\src\\pages\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\developer\\mall_sys\\mall-front\\src\\pages\\login.vue","mtime":1698477415907},{"path":"F:\\developer\\mall_sys\\mall-front\\babel.config.js","mtime":1584857058770},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRjovZGV2ZWxvcGVyL21hbGxfc3lzL21hbGwtZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuYXRvYi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tZXhjZXB0aW9uLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1leGNlcHRpb24uc3RhY2suanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWV4Y2VwdGlvbi50by1zdHJpbmctdGFnLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBzZXRDb29raWUgfSBmcm9tICdAL3V0aWwvc3VwcG9ydCc7CmltcG9ydCBRcyBmcm9tICdxcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBRczogUXMsCiAgbmFtZTogJ2xvZ2luJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICcnLAogICAgICBwYXNzd29yZDogJycsCiAgICAgIHVzZXJJZDogJycKICAgIH07CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdXNlcm5hbWUgPSB0aGlzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkID0gdGhpcy5wYXNzd29yZDsKICAgICAgdGhpcy5heGlvcy5wb3N0KCd1c2VyL2xvZ2luJywgUXMuc3RyaW5naWZ5KHsKICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDlsIYgdG9rZW5IZWFkK2p3dFRva2VuIOWtmOWFpeWIsGNvb2tpZSAg5LiL5qyh6K+35rGC5bCx5Y+v5Lul5pC65bim5Zyo6K+35rGC5aS05Lit5LqGCiAgICAgICAgX3RoaXMuJGNvb2tpZS5zZXQoJ3Rva2VuJywgcmVzLnRva2VuSGVhZCArICcgJyArIHJlcy50b2tlbiwgewogICAgICAgICAgZXhwaXJlczogJzFNJwogICAgICAgIH0pOwogICAgICAgIC8vIOS/neWtmOWIsOWFqOWxgOWPmOmHj+S4rQogICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2F2ZVRva2VuJywgcmVzLnRva2VuKTsKICAgICAgICAvLyDmi7/liLBwYXlsb2FkZXIg6Kej56CBCiAgICAgICAgdmFyIHRva2VuU3RyID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZSh3aW5kb3cuYXRvYihyZXMudG9rZW4uc3BsaXQoJy4nKVsxXSkpKTsKICAgICAgICAvLyDovazmjaLkuLpqc29u5a+56LGhCiAgICAgICAgdmFyIHVzZXJuYW1lID0gSlNPTi5wYXJzZSh0b2tlblN0cikudXNlcl9uYW1lOwoKICAgICAgICAvLyBsZXQgdXNlcm5hbWU9cmVzLnVzZXJuYW1lCgogICAgICAgIC8vIHNldENvb2tpZSgidG9rZW4iLHVzZXJuYW1lLDEyMCk7CgogICAgICAgIC8vIHNldENvb2tpZT10aGlzLiRjb29raWUuc2V0CiAgICAgICAgc2V0Q29va2llKCJ1c2VybmFtZSIsIHVzZXJuYW1lLCAxMjApOwogICAgICAgIC8vIHRoaXMuc2F2ZVVzZXJOYW1lPSB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2F2ZVVzZXJOYW1lJyx1c2VybmFtZSkKICAgICAgICBfdGhpcy5zYXZlVXNlck5hbWUodXNlcm5hbWUpOwogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAnaW5kZXgnLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGZyb206ICdsb2dpbicKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgbWFwQWN0aW9ucyhbJ3NhdmVVc2VyTmFtZSddKSksIHt9LCB7CiAgICByZWdpc3RlcjogZnVuY3Rpb24gcmVnaXN0ZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLmF4aW9zLnBvc3QoJy91c2VyL3JlZ2lzdGVyJywgewogICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKCfms6jlhozmiJDlip8nKTsKICAgICAgfSk7CiAgICB9CiAgfSkKfTs="},{"version":3,"names":["mapActions","setCookie","Qs","name","data","username","password","userId","methods","_objectSpread","login","_this","axios","post","stringify","headers","then","res","$cookie","set","tokenHead","token","expires","$store","dispatch","tokenStr","decodeURIComponent","escape","window","atob","split","JSON","parse","user_name","saveUserName","$router","push","params","from","register","_this2","$message","success"],"sources":["src/pages/login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"container\">\n      <a href=\"/#/index\"><img src=\"/imgs/login-logo.png\" alt=\"\"></a>\n    </div>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"login-form\">\n          <h3>\n            <span class=\"checked\">帐号登录</span>\n              <!-- <span class=\"sep-line\">|</span><span>扫码登录</span> -->\n          </h3>\n          <div class=\"input\">\n            <input type=\"text\" placeholder=\"请输入帐号\" v-model=\"username\">\n          </div>\n          <div class=\"input\">\n            <input type=\"password\" placeholder=\"请输入密码\" v-model=\"password\">\n          </div>\n          <div class=\"btn-box\">\n            <a href=\"javascript:;\" class=\"btn\" @click=\"login\">登录</a>\n          </div>\n          <div class=\"tips\">\n            <!-- <div class=\"sms\" @click=\"register\">手机短信登录/注册</div> -->\n            <div class=\"reg\" @click=\"register\">立即注册<span>|</span>忘记密码？</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"footer\">\n      <div class=\"footer-link\">\n        <a href=\"\" target=\"_blank\">重庆科技学院</a><span>|</span>\n        <a href=\"\" target=\"_blank\">数据结构与算法</a><span>|</span>\n        <a href=\"\" target=\"_blank\">智能工程与技术学院</a>\n      </div>\n      <p class=\"copyright\">Copyright ©2023 重庆科技学院 All Rights Reserved.</p>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapActions } from 'vuex';\nimport {setCookie} from '@/util/support';\n\nimport Qs from 'qs'\n\nexport default {\n  Qs,\n  name: 'login',\n  data(){\n    return {\n      username:'',\n      password:'',\n      userId:''\n    }\n  },\n  methods:{\n    login(){\n      let { username,password } = this;\n      \n      this.axios.post(\n        'user/login',\n         Qs.stringify({\n         username:username,\n         password:password\n         }),{headers: {'Content-Type': 'application/x-www-form-urlencoded'}}).then((res)=>{\n       \n           // 将 tokenHead+jwtToken 存入到cookie  下次请求就可以携带在请求头中了\n          this.$cookie.set('token',res.tokenHead+' '+res.token,{expires:'1M'});\n          // 保存到全局变量中\n          this.$store.dispatch('saveToken',res.token);\n          // 拿到payloader 解码\n          var tokenStr= decodeURIComponent(escape(window.atob(res.token.split('.')[1])));\n          // 转换为json对象\n          let username = JSON.parse(tokenStr).user_name;\n\n          // let username=res.username\n          \n          // setCookie(\"token\",username,120);\n\n          // setCookie=this.$cookie.set\n           setCookie(\"username\",username,120);\n           // this.saveUserName= this.$store.dispatch('saveUserName',username)\n           this.saveUserName(username);\n            \n           this.$router.push({\n              name:'index',\n              params:{\n                from:'login'\n              }\n            });\n      })\n    },\n    ...mapActions(['saveUserName']),\n    register(){\n      this.axios.post('/user/register',{\n        username:this.username,\n        password:this.password\n      }).then(()=>{\n        this.$message.success('注册成功');\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.login{\n  &>.container{\n    height:113px;\n    img{\n      width:auto;\n      height:100%;\n    }\n  }\n  .wrapper{\n    background:url('/imgs/login-bg.jpg') no-repeat center;\n    .container{\n      height:576px;\n      .login-form{\n        box-sizing: border-box;\n        padding-left: 31px;\n        padding-right: 31px;\n        width:410px;\n        height:510px;\n        background-color:#ffffff;\n        position:absolute;\n        bottom:29px;\n        right:0;\n        h3{\n          line-height:23px;\n          font-size:24px;\n          text-align:center;\n          margin:40px auto 49px;\n          .checked{\n            color:#FF6600;\n          }\n          .sep-line{\n            margin:0 32px;\n          }\n        }\n        .input{\n          display:inline-block;\n          width:348px;\n          height:50px;\n          border:1px solid #E5E5E5;\n          margin-bottom:20px;\n          input{\n            width: 100%;\n            height: 100%;\n            border: none;\n            padding: 18px;\n          }\n        }\n        .btn{\n          width:100%;\n          line-height:50px;\n          margin-top:10px;\n          font-size:16px;\n        }\n        .tips{\n          margin-top:14px;\n          display:flex;\n          justify-content:space-between;\n          font-size:14px;\n          cursor:pointer;\n          .sms{\n            color:#FF6600;\n          }\n          .reg{\n            color:#999999;\n            span{\n              margin:0 7px;\n            }\n          }\n        }\n      }\n    }\n  }\n  .footer{\n    height:100px;\n    padding-top:60px;\n    color:#999999;\n    font-size:16px;\n    text-align:center;\n    .footer-link{\n      a{\n        color:#999999;\n        display:inline-block;\n      }\n      span{\n        margin:0 10px;\n      }\n    }\n    .copyright{\n      margin-top:13px;\n    }\n  }\n}\n</style>"],"mappings":";;;;;;;AAuCA,SAAAA,UAAA;AACA,SAAAC,SAAA;AAEA,OAAAC,EAAA;AAEA;EACAA,EAAA,EAAAA,EAAA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA,EAAAC,aAAA,CAAAA,aAAA;IACAC,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MACA,IAAAN,QAAA,QAAAA,QAAA;QAAAC,QAAA,QAAAA,QAAA;MAEA,KAAAM,KAAA,CAAAC,IAAA,CACA,cACAX,EAAA,CAAAY,SAAA;QACAT,QAAA,EAAAA,QAAA;QACAC,QAAA,EAAAA;MACA;QAAAS,OAAA;UAAA;QAAA;MAAA,GAAAC,IAAA,WAAAC,GAAA;QAEA;QACAN,KAAA,CAAAO,OAAA,CAAAC,GAAA,UAAAF,GAAA,CAAAG,SAAA,SAAAH,GAAA,CAAAI,KAAA;UAAAC,OAAA;QAAA;QACA;QACAX,KAAA,CAAAY,MAAA,CAAAC,QAAA,cAAAP,GAAA,CAAAI,KAAA;QACA;QACA,IAAAI,QAAA,GAAAC,kBAAA,CAAAC,MAAA,CAAAC,MAAA,CAAAC,IAAA,CAAAZ,GAAA,CAAAI,KAAA,CAAAS,KAAA;QACA;QACA,IAAAzB,QAAA,GAAA0B,IAAA,CAAAC,KAAA,CAAAP,QAAA,EAAAQ,SAAA;;QAEA;;QAEA;;QAEA;QACAhC,SAAA,aAAAI,QAAA;QACA;QACAM,KAAA,CAAAuB,YAAA,CAAA7B,QAAA;QAEAM,KAAA,CAAAwB,OAAA,CAAAC,IAAA;UACAjC,IAAA;UACAkC,MAAA;YACAC,IAAA;UACA;QACA;MACA;IACA;EAAA,GACAtC,UAAA;IACAuC,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MACA,KAAA5B,KAAA,CAAAC,IAAA;QACAR,QAAA,OAAAA,QAAA;QACAC,QAAA,OAAAA;MACA,GAAAU,IAAA;QACAwB,MAAA,CAAAC,QAAA,CAAAC,OAAA;MACA;IACA;EAAA;AAEA"}]}