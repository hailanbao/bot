{"remainingRequest":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js!F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\developer\\mall_sys\\mall-front\\src\\pages\\login.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\developer\\mall_sys\\mall-front\\src\\pages\\login.vue","mtime":1616311786000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\developer\\mall_sys\\mall-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBzZXRDb29raWUgfSBmcm9tICdAL3V0aWwvc3VwcG9ydCc7CmltcG9ydCBRcyBmcm9tICdxcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBRcywKICBuYW1lOiAnbG9naW4nLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VybmFtZTogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgdXNlcklkOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvZ2luKCkgewogICAgICBsZXQgewogICAgICAgIHVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkCiAgICAgIH0gPSB0aGlzOwogICAgICB0aGlzLmF4aW9zLnBvc3QoJ3VzZXIvbG9naW4nLCBRcy5zdHJpbmdpZnkoewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSksIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyDlsIYgdG9rZW5IZWFkK2p3dFRva2VuIOWtmOWFpeWIsGNvb2tpZSAg5LiL5qyh6K+35rGC5bCx5Y+v5Lul5pC65bim5Zyo6K+35rGC5aS05Lit5LqGCiAgICAgICAgdGhpcy4kY29va2llLnNldCgndG9rZW4nLCByZXMudG9rZW5IZWFkICsgJyAnICsgcmVzLnRva2VuLCB7CiAgICAgICAgICBleHBpcmVzOiAnMU0nCiAgICAgICAgfSk7CiAgICAgICAgLy8g5L+d5a2Y5Yiw5YWo5bGA5Y+Y6YeP5LitCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NhdmVUb2tlbicsIHJlcy50b2tlbik7CiAgICAgICAgLy8g5ou/5YiwcGF5bG9hZGVyIOino+eggQogICAgICAgIHZhciB0b2tlblN0ciA9IGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUod2luZG93LmF0b2IocmVzLnRva2VuLnNwbGl0KCcuJylbMV0pKSk7CiAgICAgICAgLy8g6L2s5o2i5Li6anNvbuWvueixoQogICAgICAgIGxldCB1c2VybmFtZSA9IEpTT04ucGFyc2UodG9rZW5TdHIpLnVzZXJfbmFtZTsKCiAgICAgICAgLy8gbGV0IHVzZXJuYW1lPXJlcy51c2VybmFtZQoKICAgICAgICAvLyBzZXRDb29raWUoInRva2VuIix1c2VybmFtZSwxMjApOwoKICAgICAgICAvLyBzZXRDb29raWU9dGhpcy4kY29va2llLnNldAogICAgICAgIHNldENvb2tpZSgidXNlcm5hbWUiLCB1c2VybmFtZSwgMTIwKTsKICAgICAgICAvLyB0aGlzLnNhdmVVc2VyTmFtZT0gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NhdmVVc2VyTmFtZScsdXNlcm5hbWUpCiAgICAgICAgdGhpcy5zYXZlVXNlck5hbWUodXNlcm5hbWUpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICdpbmRleCcsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgZnJvbTogJ2xvZ2luJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAuLi5tYXBBY3Rpb25zKFsnc2F2ZVVzZXJOYW1lJ10pLAogICAgcmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMuYXhpb3MucG9zdCgnL3VzZXIvcmVnaXN0ZXInLCB7CiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfms6jlhozmiJDlip8nKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapActions","setCookie","Qs","name","data","username","password","userId","methods","login","axios","post","stringify","headers","then","res","$cookie","set","tokenHead","token","expires","$store","dispatch","tokenStr","decodeURIComponent","escape","window","atob","split","JSON","parse","user_name","saveUserName","$router","push","params","from","register","$message","success"],"sources":["src/pages/login.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"container\">\n      <a href=\"/#/index\"><img src=\"/imgs/login-logo.png\" alt=\"\"></a>\n    </div>\n    <div class=\"wrapper\">\n      <div class=\"container\">\n        <div class=\"login-form\">\n          <h3>\n            <span class=\"checked\">帐号登录</span>\n              <!-- <span class=\"sep-line\">|</span><span>扫码登录</span> -->\n          </h3>\n          <div class=\"input\">\n            <input type=\"text\" placeholder=\"请输入帐号\" v-model=\"username\">\n          </div>\n          <div class=\"input\">\n            <input type=\"password\" placeholder=\"请输入密码\" v-model=\"password\">\n          </div>\n          <div class=\"btn-box\">\n            <a href=\"javascript:;\" class=\"btn\" @click=\"login\">登录</a>\n          </div>\n          <div class=\"tips\">\n            <!-- <div class=\"sms\" @click=\"register\">手机短信登录/注册</div> -->\n            <div class=\"reg\" @click=\"register\">立即注册<span>|</span>忘记密码？</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"footer\">\n      <div class=\"footer-link\">\n        <a href=\"http://www.tulingxueyuan.cn/\" target=\"_blank\">图灵学院</a><span>|</span>\n        <a href=\"https://ke.qq.com/course/231516?tuin=a6505b53\" target=\"_blank\">腾讯课堂java架构师培训</a><span>|</span>\n        <a href=\"https://ke.qq.com/course/429988\" target=\"_blank\">数据结构与算法</a><span>|</span>\n        <a href=\"https://tuling.ke.qq.com/\" target=\"_blank\">腾讯课堂图灵学院</a>\n      </div>\n      <p class=\"copyright\">Copyright ©2019 图灵学院 All Rights Reserved.</p>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapActions } from 'vuex';\nimport {setCookie} from '@/util/support';\n\nimport Qs from 'qs'\n\nexport default {\n  Qs,\n  name: 'login',\n  data(){\n    return {\n      username:'',\n      password:'',\n      userId:''\n    }\n  },\n  methods:{\n    login(){\n      let { username,password } = this;\n      \n      this.axios.post(\n        'user/login',\n         Qs.stringify({\n         username:username,\n         password:password\n         }),{headers: {'Content-Type': 'application/x-www-form-urlencoded'}}).then((res)=>{\n       \n           // 将 tokenHead+jwtToken 存入到cookie  下次请求就可以携带在请求头中了\n          this.$cookie.set('token',res.tokenHead+' '+res.token,{expires:'1M'});\n          // 保存到全局变量中\n          this.$store.dispatch('saveToken',res.token);\n          // 拿到payloader 解码\n          var tokenStr= decodeURIComponent(escape(window.atob(res.token.split('.')[1])));\n          // 转换为json对象\n          let username = JSON.parse(tokenStr).user_name;\n\n          // let username=res.username\n          \n          // setCookie(\"token\",username,120);\n\n          // setCookie=this.$cookie.set\n           setCookie(\"username\",username,120);\n           // this.saveUserName= this.$store.dispatch('saveUserName',username)\n           this.saveUserName(username);\n            \n           this.$router.push({\n              name:'index',\n              params:{\n                from:'login'\n              }\n            });\n      })\n    },\n    ...mapActions(['saveUserName']),\n    register(){\n      this.axios.post('/user/register',{\n        username:this.username,\n        password:this.password\n      }).then(()=>{\n        this.$message.success('注册成功');\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n.login{\n  &>.container{\n    height:113px;\n    img{\n      width:auto;\n      height:100%;\n    }\n  }\n  .wrapper{\n    background:url('/imgs/login-bg.jpg') no-repeat center;\n    .container{\n      height:576px;\n      .login-form{\n        box-sizing: border-box;\n        padding-left: 31px;\n        padding-right: 31px;\n        width:410px;\n        height:510px;\n        background-color:#ffffff;\n        position:absolute;\n        bottom:29px;\n        right:0;\n        h3{\n          line-height:23px;\n          font-size:24px;\n          text-align:center;\n          margin:40px auto 49px;\n          .checked{\n            color:#FF6600;\n          }\n          .sep-line{\n            margin:0 32px;\n          }\n        }\n        .input{\n          display:inline-block;\n          width:348px;\n          height:50px;\n          border:1px solid #E5E5E5;\n          margin-bottom:20px;\n          input{\n            width: 100%;\n            height: 100%;\n            border: none;\n            padding: 18px;\n          }\n        }\n        .btn{\n          width:100%;\n          line-height:50px;\n          margin-top:10px;\n          font-size:16px;\n        }\n        .tips{\n          margin-top:14px;\n          display:flex;\n          justify-content:space-between;\n          font-size:14px;\n          cursor:pointer;\n          .sms{\n            color:#FF6600;\n          }\n          .reg{\n            color:#999999;\n            span{\n              margin:0 7px;\n            }\n          }\n        }\n      }\n    }\n  }\n  .footer{\n    height:100px;\n    padding-top:60px;\n    color:#999999;\n    font-size:16px;\n    text-align:center;\n    .footer-link{\n      a{\n        color:#999999;\n        display:inline-block;\n      }\n      span{\n        margin:0 10px;\n      }\n    }\n    .copyright{\n      margin-top:13px;\n    }\n  }\n}\n</style>"],"mappings":"AAwCA,SAAAA,UAAA;AACA,SAAAC,SAAA;AAEA,OAAAC,EAAA;AAEA;EACAA,EAAA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,MAAA;IACA;EACA;EACAC,OAAA;IACAC,MAAA;MACA;QAAAJ,QAAA;QAAAC;MAAA;MAEA,KAAAI,KAAA,CAAAC,IAAA,CACA,cACAT,EAAA,CAAAU,SAAA;QACAP,QAAA,EAAAA,QAAA;QACAC,QAAA,EAAAA;MACA;QAAAO,OAAA;UAAA;QAAA;MAAA,GAAAC,IAAA,CAAAC,GAAA;QAEA;QACA,KAAAC,OAAA,CAAAC,GAAA,UAAAF,GAAA,CAAAG,SAAA,SAAAH,GAAA,CAAAI,KAAA;UAAAC,OAAA;QAAA;QACA;QACA,KAAAC,MAAA,CAAAC,QAAA,cAAAP,GAAA,CAAAI,KAAA;QACA;QACA,IAAAI,QAAA,GAAAC,kBAAA,CAAAC,MAAA,CAAAC,MAAA,CAAAC,IAAA,CAAAZ,GAAA,CAAAI,KAAA,CAAAS,KAAA;QACA;QACA,IAAAvB,QAAA,GAAAwB,IAAA,CAAAC,KAAA,CAAAP,QAAA,EAAAQ,SAAA;;QAEA;;QAEA;;QAEA;QACA9B,SAAA,aAAAI,QAAA;QACA;QACA,KAAA2B,YAAA,CAAA3B,QAAA;QAEA,KAAA4B,OAAA,CAAAC,IAAA;UACA/B,IAAA;UACAgC,MAAA;YACAC,IAAA;UACA;QACA;MACA;IACA;IACA,GAAApC,UAAA;IACAqC,SAAA;MACA,KAAA3B,KAAA,CAAAC,IAAA;QACAN,QAAA,OAAAA,QAAA;QACAC,QAAA,OAAAA;MACA,GAAAQ,IAAA;QACA,KAAAwB,QAAA,CAAAC,OAAA;MACA;IACA;EACA;AACA"}]}